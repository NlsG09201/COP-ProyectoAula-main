import{a as M}from"./chunk-UG73MJDQ.js";import{$a as s,Ea as b,Gb as I,Ha as p,Hb as N,Ib as w,Nb as F,Oa as d,Pa as e,Qa as t,Ta as f,Ua as h,_a as i,cb as x,db as v,eb as S,fb as C,pa as a,wb as E,xb as T,yb as y,za as _}from"./chunk-NP5DNCOA.js";var P=()=>[];function k(n,o){n&1&&(e(0,"div",12),i(1,"Cargando..."),t())}function D(n,o){if(n&1&&(e(0,"div",13),i(1),t()),n&2){let c=h();a(),s(c.error)}}function j(n,o){if(n&1&&(e(0,"tr",18)(1,"td",19),i(2),t(),e(3,"td",19),i(4),t(),e(5,"td",19),i(6),t(),e(7,"td",19),i(8),t()()),n&2){let c=o.$implicit;a(2),s(c.created),a(2),s((c.to||C(4,P)).join(", ")),a(2),s(c.subject||"\u2014"),a(2),s(c.from||"\u2014")}}function A(n,o){if(n&1&&(e(0,"table",14)(1,"thead",15)(2,"tr")(3,"th",16),i(4,"Fecha"),t(),e(5,"th",16),i(6,"Para"),t(),e(7,"th",16),i(8,"Asunto"),t(),e(9,"th",16),i(10,"Desde"),t()()(),e(11,"tbody"),p(12,j,9,5,"tr",17),t()()),n&2){let c=h();a(12),d("ngForOf",c.lista)}}var U=(()=>{let o=class o{constructor(m){this.api=m,this.lista=[],this.filtroTo="",this.loading=!1,this.error="",this.buscar()}buscar(){try{let r=sessionStorage.getItem("notifFilterEmail")||"";r&&!this.filtroTo&&(this.filtroTo=r)}catch{}this.loading=!0,this.error="";let m=this.filtroTo?`?to=${encodeURIComponent(this.filtroTo)}`:"";this.api.get(`/notificaciones${m}`).subscribe({next:r=>{this.lista=r||[],this.loading=!1},error:()=>{this.error="Error cargando notificaciones",this.loading=!1}})}limpiar(){this.filtroTo="",this.buscar()}};o.\u0275fac=function(r){return new(r||o)(_(M))},o.\u0275cmp=b({type:o,selectors:[["app-notificaciones-page"]],decls:18,vars:4,consts:[[1,"text-2xl","font-semibold","mb-2"],[1,"text-slate-600","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mb-4"],[1,"field"],["placeholder","email@dominio",3,"ngModelChange","input","ngModel"],[1,"field",2,"align-self","end"],[1,"btn",3,"click"],[1,"btn","secondary",2,"margin-left","8px",3,"click"],["class","card mb-4",4,"ngIf"],["class","card mb-4 text-red-700",4,"ngIf"],[1,"overflow-x-auto","rounded-lg","shadow"],["class","min-w-full bg-white",4,"ngIf"],[1,"card","mb-4"],[1,"card","mb-4","text-red-700"],[1,"min-w-full","bg-white"],[1,"bg-blue-50"],[1,"px-4","py-2","text-left"],["class","border-t",4,"ngFor","ngForOf"],[1,"border-t"],[1,"px-4","py-2"]],template:function(r,l){r&1&&(e(0,"h2",0),i(1,"Notificaciones"),t(),e(2,"p",1),i(3,"Correos enviados por confirmaciones de cita."),t(),e(4,"div",2)(5,"div",3)(6,"label"),i(7,"Filtrar por email del paciente"),t(),e(8,"input",4),S("ngModelChange",function(u){return v(l.filtroTo,u)||(l.filtroTo=u),u}),f("input",function(){return l.buscar()}),t()(),e(9,"div",5)(10,"button",6),f("click",function(){return l.buscar()}),i(11,"Buscar"),t(),e(12,"button",7),f("click",function(){return l.limpiar()}),i(13,"Limpiar"),t()()(),p(14,k,2,0,"div",8)(15,D,2,1,"div",9),e(16,"div",10),p(17,A,13,1,"table",11),t()),r&2&&(a(8),x("ngModel",l.filtroTo),a(6),d("ngIf",l.loading),a(),d("ngIf",l.error),a(2),d("ngIf",!l.loading))},dependencies:[y,E,T,F,I,N,w],encapsulation:2});let n=o;return n})();export{U as NotificacionesPageComponent};
