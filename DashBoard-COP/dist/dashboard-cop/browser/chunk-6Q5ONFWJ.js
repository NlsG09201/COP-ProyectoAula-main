import{a as P}from"./chunk-UG73MJDQ.js";import{$a as s,Ea as h,Gb as I,Ha as p,Hb as N,Ib as w,Nb as M,Oa as m,Pa as e,Qa as t,Ta as f,Ua as _,_a as i,cb as x,db as v,eb as S,fb as C,pa as a,wb as E,xb as T,yb as y,za as b}from"./chunk-NP5DNCOA.js";var F=()=>[];function k(n,o){n&1&&(e(0,"div",12),i(1,"Cargando..."),t())}function D(n,o){if(n&1&&(e(0,"div",13),i(1),t()),n&2){let l=_();a(),s(l.error)}}function j(n,o){if(n&1&&(e(0,"tr",18)(1,"td",19),i(2),t(),e(3,"td",19),i(4),t(),e(5,"td",19),i(6),t(),e(7,"td",19),i(8),t()()),n&2){let l=o.$implicit;a(2),s(l.created),a(2),s((l.to||C(4,F)).join(", ")),a(2),s(l.subject||"\u2014"),a(2),s(l.from||"\u2014")}}function A(n,o){if(n&1&&(e(0,"table",14)(1,"thead",15)(2,"tr")(3,"th",16),i(4,"Fecha"),t(),e(5,"th",16),i(6,"Para"),t(),e(7,"th",16),i(8,"Asunto"),t(),e(9,"th",16),i(10,"Desde"),t()()(),e(11,"tbody"),p(12,j,9,5,"tr",17),t()()),n&2){let l=_();a(12),m("ngForOf",l.lista)}}var U=(()=>{let o=class o{constructor(d){this.api=d,this.lista=[],this.filtroTo="",this.loading=!1,this.error="",this.buscar()}buscar(){this.loading=!0,this.error="";let d=this.filtroTo?`?to=${encodeURIComponent(this.filtroTo)}`:"";this.api.get(`/notificaciones${d}`).subscribe({next:c=>{this.lista=c||[],this.loading=!1},error:()=>{this.error="Error cargando notificaciones",this.loading=!1}})}limpiar(){this.filtroTo="",this.buscar()}};o.\u0275fac=function(c){return new(c||o)(b(P))},o.\u0275cmp=h({type:o,selectors:[["app-notificaciones-page"]],decls:18,vars:4,consts:[[1,"text-2xl","font-semibold","mb-2"],[1,"text-slate-600","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mb-4"],[1,"field"],["placeholder","email@dominio",3,"ngModelChange","input","ngModel"],[1,"field",2,"align-self","end"],[1,"btn",3,"click"],[1,"btn","secondary",2,"margin-left","8px",3,"click"],["class","card mb-4",4,"ngIf"],["class","card mb-4 text-red-700",4,"ngIf"],[1,"overflow-x-auto","rounded-lg","shadow"],["class","min-w-full bg-white",4,"ngIf"],[1,"card","mb-4"],[1,"card","mb-4","text-red-700"],[1,"min-w-full","bg-white"],[1,"bg-blue-50"],[1,"px-4","py-2","text-left"],["class","border-t",4,"ngFor","ngForOf"],[1,"border-t"],[1,"px-4","py-2"]],template:function(c,r){c&1&&(e(0,"h2",0),i(1,"Notificaciones"),t(),e(2,"p",1),i(3,"Correos enviados por confirmaciones de cita."),t(),e(4,"div",2)(5,"div",3)(6,"label"),i(7,"Filtrar por email del paciente"),t(),e(8,"input",4),S("ngModelChange",function(g){return v(r.filtroTo,g)||(r.filtroTo=g),g}),f("input",function(){return r.buscar()}),t()(),e(9,"div",5)(10,"button",6),f("click",function(){return r.buscar()}),i(11,"Buscar"),t(),e(12,"button",7),f("click",function(){return r.limpiar()}),i(13,"Limpiar"),t()()(),p(14,k,2,0,"div",8)(15,D,2,1,"div",9),e(16,"div",10),p(17,A,13,1,"table",11),t()),c&2&&(a(8),x("ngModel",r.filtroTo),a(6),m("ngIf",r.loading),a(),m("ngIf",r.error),a(2),m("ngIf",!r.loading))},dependencies:[y,E,T,M,I,N,w],encapsulation:2});let n=o;return n})();export{U as NotificacionesPageComponent};
